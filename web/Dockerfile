# Используем официальный образ Golang как базовый
FROM golang:1.21-alpine

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем go.mod и go.sum из директории app в рабочую директорию
COPY ../app/go.mod ../app/go.sum ./

# Скачиваем зависимости
RUN go mod download

# Копируем остальные файлы из директории app в рабочую директорию
COPY ../app ./

# Собираем приложение
RUN go build -o main .

# Устанавливаем порт, который будет прослушивать наше приложение
EXPOSE 8000

# Команда для запуска приложения
CMD ["./main"]
